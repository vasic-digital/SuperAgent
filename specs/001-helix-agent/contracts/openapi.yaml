# API Contracts

## gRPC Service Definitions

### LLM Facade Service
```protobuf
syntax = "proto3";

package llm;

option go_package = "github.com/helixagent/pkg/api";

import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";

service LLMFacade {
  // Core completion operations
  rpc Complete(CompletionRequest) returns (CompletionResponse);
  rpc CompleteStream(CompletionRequest) returns (stream CompletionResponse);
  
  // Chat operations with context
  rpc Chat(ChatRequest) returns (ChatResponse);
  rpc ChatStream(ChatRequest) returns (stream ChatResponse);
  
  // Plugin management
  rpc ListProviders(ListProvidersRequest) returns (ListProvidersResponse);
  rpc AddProvider(AddProviderRequest) returns (ProviderResponse);
  rpc UpdateProvider(UpdateProviderRequest) returns (ProviderResponse);
  rpc RemoveProvider(RemoveProviderRequest) returns (ProviderResponse);
  
  // Health and monitoring
  rpc HealthCheck(HealthRequest) returns (HealthResponse);
  rpc GetMetrics(GetMetricsRequest) returns (MetricsResponse);
  
  // Session management
  rpc CreateSession(CreateSessionRequest) returns (SessionResponse);
  rpc GetSession(GetSessionRequest) returns (SessionResponse);
  rpc TerminateSession(TerminateSessionRequest) returns (SessionResponse);
}

// Request messages
message CompletionRequest {
  string request_id = 1;
  string session_id = 2;
  string user_id = 3;
  string prompt = 4;
  repeated Message messages = 5;
  ModelParameters model_params = 6;
  EnsembleConfig ensemble_config = 7;
  bool memory_enhanced = 8;
  map<string, string> metadata = 9;
  string request_type = 10; // code_generation, reasoning, tool_use
  int32 priority = 11;
  google.protobuf.Timestamp created_at = 12;
}

message CompletionResponse {
  string response_id = 1;
  string request_id = 2;
  string content = 3;
  double confidence = 4;
  int32 tokens_used = 5;
  int64 response_time_ms = 6;
  string finish_reason = 7;
  map<string, string> metadata = 8;
  bool selected = 9;
  double selection_score = 10;
  string provider_name = 11;
  google.protobuf.Timestamp created_at = 12;
}

// Chat messages
message ChatRequest {
  string session_id = 1;
  repeated Message messages = 2;
  ModelParameters model_params = 3;
  bool memory_enhanced = 4;
  map<string, string> metadata = 5;
}

message ChatResponse {
  string response_id = 1;
  string content = 2;
  double confidence = 3;
  int32 tokens_used = 4;
  string provider_name = 5;
  bool is_streaming = 6;
  bool is_complete = 7;
  repeated MemorySource memory_sources = 8;
  google.protobuf.Timestamp created_at = 9;
}

message Message {
  string role = 1; // system, user, assistant, tool
  string content = 2;
  string name = 3; // optional for tool messages
  map<string, string> tool_calls = 4; // for function calling
}

message ModelParameters {
  string model = 1;
  double temperature = 2;
  int32 max_tokens = 3;
  double top_p = 4;
  repeated string stop_sequences = 5;
  map<string, string> provider_specific = 6;
}

message EnsembleConfig {
  string strategy = 1; // confidence_weighted, majority_vote, random
  int32 min_providers = 2;
  double confidence_threshold = 3;
  bool fallback_to_best = 4;
  int32 timeout_seconds = 5;
  repeated string preferred_providers = 6;
}

message MemorySource {
  string dataset_name = 1;
  string content = 2;
  double relevance_score = 3;
  string source_type = 4; // vector, graph, summary
}

// Provider management messages
message ListProvidersRequest {
  bool enabled_only = 1;
  string provider_type = 2;
}

message ListProvidersResponse {
  repeated ProviderInfo providers = 1;
}

message AddProviderRequest {
  string name = 1;
  string type = 2; // deepseek, claude, gemini, qwen, zai
  string api_key = 3;
  string base_url = 4;
  string model = 5;
  double weight = 6;
  bool enabled = 7;
  map<string, string> config = 8;
}

message UpdateProviderRequest {
  string id = 1;
  string name = 2;
  string api_key = 3;
  string base_url = 4;
  string model = 5;
  double weight = 6;
  bool enabled = 7;
  map<string, string> config = 8;
}

message RemoveProviderRequest {
  string id = 1;
  bool force = 2;
}

message ProviderResponse {
  bool success = 1;
  string message = 2;
  ProviderInfo provider = 3;
}

message ProviderInfo {
  string id = 1;
  string name = 2;
  string type = 3;
  string model = 4;
  double weight = 5;
  bool enabled = 6;
  string health_status = 7;
  int64 response_time_ms = 8;
  double success_rate = 9;
  ProviderCapabilities capabilities = 10;
  google.protobuf.Timestamp last_updated = 11;
}

message ProviderCapabilities {
  repeated string supported_models = 1;
  repeated string supported_features = 2; // streaming, function_calling, vision
  ModelLimits limits = 3;
  repeated string supported_request_types = 4;
  bool supports_streaming = 5;
  bool supports_function_calling = 6;
  bool supports_vision = 7;
}

message ModelLimits {
  int32 max_tokens = 1;
  int32 max_input_length = 2;
  int32 max_output_length = 3;
  int32 max_concurrent_requests = 4;
}

// Health and monitoring messages
message HealthRequest {
  bool detailed = 1;
  repeated string check_components = 2; // database, cognee, providers
}

message HealthResponse {
  string status = 1; // healthy, degraded, unhealthy
  repeated ComponentHealth components = 2;
  google.protobuf.Timestamp timestamp = 3;
  string version = 4;
}

message ComponentHealth {
  string name = 1;
  string status = 2;
  string message = 3;
  int64 response_time_ms = 4;
  map<string, string> details = 5;
}

message GetMetricsRequest {
  string time_range = 1; // 1h, 24h, 7d, 30d
  repeated string metrics = 2;
}

message MetricsResponse {
  map<string, double> metrics = 1;
  google.protobuf.Timestamp start_time = 2;
  google.protobuf.Timestamp end_time = 3;
}

// Session management messages
message CreateSessionRequest {
  string user_id = 1;
  map<string, string> initial_context = 2;
  int32 ttl_hours = 3;
  bool memory_enabled = 4;
}

message GetSessionRequest {
  string session_id = 1;
  bool include_context = 2;
}

message TerminateSessionRequest {
  string session_id = 1;
  bool graceful = 2;
}

message SessionResponse {
  bool success = 1;
  string message = 2;
  string session_id = 3;
  string user_id = 4;
  string status = 5; // active, expired, terminated
  int32 request_count = 6;
  google.protobuf.Timestamp last_activity = 7;
  google.protobuf.Timestamp expires_at = 8;
  map<string, string> context = 9;
  google.protobuf.Timestamp created_at = 10;
}
```

### LLM Provider Plugin Service
```protobuf
syntax = "proto3";

package llm;

option go_package = "github.com/helixagent/pkg/api";

service LLMProvider {
  // Core LLM operations
  rpc Complete(CompletionRequest) returns (CompletionResponse);
  rpc CompleteStream(CompletionRequest) returns (stream CompletionResponse);
  
  // Provider capabilities
  rpc GetCapabilities(CapabilitiesRequest) returns (CapabilitiesResponse);
  rpc ValidateConfig(ConfigValidationRequest) returns (ConfigValidationResponse);
  
  // Health and monitoring
  rpc HealthCheck(HealthRequest) returns (ProviderHealthResponse);
  rpc GetMetrics(ProviderMetricsRequest) returns (ProviderMetricsResponse);
}

message CapabilitiesRequest {}

message CapabilitiesResponse {
  repeated string supported_models = 1;
  repeated string supported_features = 2;
  ModelLimits limits = 3;
  repeated string supported_request_types = 4;
  bool supports_streaming = 5;
  bool supports_function_calling = 6;
  bool supports_vision = 7;
  map<string, string> metadata = 8;
}

message ConfigValidationRequest {
  map<string, string> config = 1;
}

message ConfigValidationResponse {
  bool valid = 1;
  repeated string errors = 2;
  repeated string warnings = 3;
}

message ProviderHealthResponse {
  string status = 1;
  string message = 2;
  int64 response_time_ms = 3;
  map<string, double> metrics = 4;
  google.protobuf.Timestamp timestamp = 5;
}

message ProviderMetricsRequest {
  string time_range = 1;
}

message ProviderMetricsResponse {
  map<string, double> metrics = 1;
  google.protobuf.Timestamp start_time = 2;
  google.protobuf.Timestamp end_time = 3;
}
```

## REST API Specification

### OpenAPI 3.0 Specification

```yaml
openapi: 3.0.3
info:
  title: HelixAgent LLM Facade API
  description: Unified API for multiple LLM providers with ensemble voting and memory enhancement
  version: 1.0.0
  contact:
    name: HelixAgent Team
    email: support@helixagent.com
  license: MIT

servers:
  - url: https://api.helixagent.com/v1
    description: Production server
  - url: https://staging-api.helixagent.com/v1
    description: Staging server

paths:
  /completions:
    post:
      summary: Generate text completion using ensemble of LLM providers
      operationId: generateCompletion
      tags:
        - LLM
        - Ensemble
        - Completion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompletionRequest'
      responses:
        '200':
          description: Successful completion
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompletionResponse'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /completions/stream:
    post:
      summary: Generate streaming text completion
      operationId: streamCompletion
      tags:
        - LLM
        - Streaming
        - SSE
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompletionRequest'
      responses:
        '200':
          description: Streaming response
          content:
            text/event-stream:
              schema:
                type: string
        '400':
          description: Bad request
        '500':
          description: Internal server error

  /chat/completions:
    post:
      summary: Generate chat completion with context
      operationId: generateChatCompletion
      tags:
        - LLM
        - Chat
        - Context
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatRequest'
      responses:
        '200':
          description: Successful chat completion
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChatResponse'
        '400':
          description: Bad request
        '500':
          description: Internal server error

  /chat/completions/stream:
    post:
      summary: Generate streaming chat completion
      operationId: streamChatCompletion
      tags:
        - LLM
        - Chat
        - Streaming
        - SSE
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatRequest'
      responses:
        '200':
          description: Streaming chat response
          content:
            text/event-stream

  /providers:
    get:
      summary: List available LLM providers
      operationId: listProviders
      tags:
        - LLM
        - Providers
      responses:
        '200':
          description: List of providers
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProviderInfo'

  /providers:
    post:
      summary: Add new LLM provider
      operationId: addProvider
      tags:
        - LLM
        - Providers
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddProviderRequest'
      responses:
        '201':
          description: Provider added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProviderResponse'
        '400':
          description: Bad request
        '409':
          description: Provider already exists

  /providers/{providerId}:
    get:
      summary: Get provider by ID
      operationId: getProvider
      tags:
        - LLM
        - Providers
      parameters:
        - name: providerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Provider details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProviderInfo'
        '404':
          description: Provider not found

  /providers/{providerId}:
    put:
      summary: Update LLM provider
      operationId: updateProvider
      tags:
        - LLM
        - Providers
      parameters:
        - name: providerId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProviderRequest'
      responses:
        '200':
          description: Provider updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProviderResponse'
        '404':
          description: Provider not found

  /providers/{providerId}:
    delete:
      summary: Remove LLM provider
      operationId: removeProvider
      tags:
        - LLM
        - Providers
      parameters:
        - name: providerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Provider removed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProviderResponse'
        '404':
          description: Provider not found
        '409':
          description: Cannot remove provider (in use)

  /health:
    get:
      summary: Health check endpoint
      operationId: healthCheck
      tags:
        - Health
        - Monitoring
      parameters:
        - name: detailed
          in: query
          required: false
          schema:
            type: boolean
        - name: components
          in: query
          required: false
          schema:
            type: array
            items:
              type: string
      responses:
        '200':
          description: System health status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
        '503':
          description: Service unhealthy

  /metrics:
    get:
      summary: Get system metrics
      operationId: getMetrics
      tags:
        - Monitoring
        - Metrics
      parameters:
        - name: timeRange
          in: query
          required: false
          schema:
            type: string
            enum: [1h, 24h, 7d, 30d]
        - name: metrics
          in: query
          required: false
          schema:
            type: array
            items:
              type: string
      responses:
        '200':
          description: System metrics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetricsResponse'

  /sessions:
    post:
      summary: Create new user session
      operationId: createSession
      tags:
        - Sessions
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSessionRequest'
      responses:
        '201':
          description: Session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponse'

  /sessions/{sessionId}:
    get:
      summary: Get session details
      operationId: getSession
      tags:
        - Sessions
        - Authentication
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
        - name: includeContext
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: Session details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponse'
        '404':
          description: Session not found

  /sessions/{sessionId}:
    delete:
      summary: Terminate user session
      operationId: terminateSession
      tags:
        - Sessions
        - Authentication
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
        - name: graceful
          in: query
          required: false
          schema:
            type: boolean
      responses:
        '200':
          description: Session terminated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponse'

components:
  schemas:
    CompletionRequest:
      type: object
      required:
        - prompt
        - request_type
      properties:
        prompt:
          type: string
          description: The text prompt for completion
          maxLength: 32000
        request_type:
          type: string
          enum: [code_generation, reasoning, tool_use]
          description: Type of request
        model_params:
          $ref: '#/components/schemas/ModelParameters'
        ensemble_config:
          $ref: '#/components/schemas/EnsembleConfig'
        memory_enhanced:
          type: boolean
          description: Whether to enhance with Cognee memory
        priority:
          type: integer
          minimum: 0
          maximum: 10
          description: Request priority (0-10)
        messages:
          type: array
          items:
            $ref: '#/components/schemas/Message'
        metadata:
          type: object
          description: Additional metadata
        session_id:
          type: string
          description: Session ID for context
        user_id:
          type: string
          description: User ID for tracking

    CompletionResponse:
      type: object
      properties:
        response_id:
          type: string
          description: Unique response identifier
        request_id:
          type: string
          description: Associated request ID
        content:
          type: string
          description: Generated completion text
        confidence:
          type: number
          minimum: 0
          maximum: 1
          description: Confidence score (0-1)
        tokens_used:
          type: integer
          minimum: 0
          description: Number of tokens used
        response_time_ms:
          type: integer
          minimum: 0
          description: Response time in milliseconds
        finish_reason:
          type: string
          enum: [stop, length, content_filter, tool_calls, max_tokens]
          description: Reason for completion
        metadata:
          type: object
          description: Provider-specific metadata
        selected:
          type: boolean
          description: Whether response was selected by ensemble
        selection_score:
          type: number
          minimum: 0
          maximum: 1
          description: Ensemble selection score
        provider_name:
          type: string
          description: Name of generating provider
        created_at:
          type: string
          format: date-time
          description: Response creation timestamp

    ChatRequest:
      type: object
      required:
        - messages
      properties:
        session_id:
          type: string
          description: Session ID for context
        messages:
          type: array
          items:
            $ref: '#/components/schemas/Message'
        model_params:
          $ref: '#/components/schemas/ModelParameters'
        memory_enhanced:
          type: boolean
          description: Whether to enhance with Cognee memory
        metadata:
          type: object
          description: Additional metadata

    ChatResponse:
      type: object
      properties:
        response_id:
          type: string
          description: Unique response identifier
        content:
          type: string
          description: Generated chat response
        confidence:
          type: number
          minimum: 0
          maximum: 1
          description: Confidence score (0-1)
        tokens_used:
          type: integer
          minimum: 0
          description: Number of tokens used
        provider_name:
          type: string
          description: Name of generating provider
        is_streaming:
          type: boolean
          description: Whether response is streaming
        is_complete:
          type: boolean
          description: Whether streaming response is complete
        memory_sources:
          type: array
          items:
            $ref: '#/components/schemas/MemorySource'
        created_at:
          type: string
          format: date-time
          description: Response creation timestamp

    Message:
      type: object
      required:
        - role
        - content
      properties:
        role:
          type: string
          enum: [system, user, assistant, tool]
          description: Message role
        content:
          type: string
          maxLength: 8000
          description: Message content
        name:
          type: string
          description: Optional name for tool messages
        tool_calls:
          type: object
          description: Tool/function calls

    ModelParameters:
      type: object
      properties:
        model:
          type: string
          description: Model name
        temperature:
          type: number
          minimum: 0
          maximum: 2
          description: Sampling temperature
        max_tokens:
          type: integer
          minimum: 1
          maximum: 128000
          description: Maximum tokens to generate
        top_p:
          type: number
          minimum: 0
          maximum: 1
          description: Nucleus sampling parameter
        stop_sequences:
          type: array
          items:
            type: string
          description: Stop sequences
        provider_specific:
          type: object
          description: Provider-specific parameters

    EnsembleConfig:
      type: object
      properties:
        strategy:
          type: string
          enum: [confidence_weighted, majority_vote, random]
          description: Ensemble voting strategy
        min_providers:
          type: integer
          minimum: 1
          description: Minimum providers required
        confidence_threshold:
          type: number
          minimum: 0
          maximum: 1
          description: Minimum confidence threshold
        fallback_to_best:
          type: boolean
          description: Fallback to best single response
        timeout_seconds:
          type: integer
          minimum: 5
          maximum: 300
          description: Timeout in seconds
        preferred_providers:
          type: array
          items:
            type: string
          description: Preferred provider list

    MemorySource:
      type: object
      properties:
        dataset_name:
          type: string
          description: Cognee dataset name
        content:
          type: string
          description: Memory content
        relevance_score:
          type: number
          minimum: 0
          maximum: 1
          description: Relevance score (0-1)
        source_type:
          type: string
          enum: [vector, graph, summary]
          description: Type of memory source

    AddProviderRequest:
      type: object
      required:
        - name
        - type
        - api_key
        - base_url
        - model
      properties:
        name:
          type: string
          maxLength: 100
          description: Provider name
        type:
          type: string
          enum: [deepseek, claude, gemini, qwen, zai]
          description: Provider type
        api_key:
          type: string
          description: API key (encrypted)
        base_url:
          type: string
          format: uri
          description: Base URL
        model:
          type: string
          description: Default model
        weight:
          type: number
          minimum: 0.1
          maximum: 10
          description: Provider weight in ensemble
        enabled:
          type: boolean
          description: Whether provider is enabled
        config:
          type: object
          description: Provider-specific configuration

    UpdateProviderRequest:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          description: Provider ID
        name:
          type: string
          description: Provider name
        api_key:
          type: string
          description: API key
        base_url:
          type: string
          description: Base URL
        model:
          type: string
          description: Default model
        weight:
          type: number
          description: Provider weight
        enabled:
          type: boolean
          description: Whether provider is enabled
        config:
          type: object
          description: Provider-specific configuration

    CreateSessionRequest:
      type: object
      required:
        - user_id
      properties:
        user_id:
          type: string
          description: User ID
        initial_context:
          type: object
          description: Initial session context
        ttl_hours:
          type: integer
          minimum: 1
          maximum: 168
          description: Session TTL in hours
        memory_enabled:
          type: boolean
          description: Enable memory for session

    SessionResponse:
      type: object
      properties:
        success:
          type: boolean
          description: Request success
        message:
          type: string
          description: Response message
        session_id:
          type: string
          description: Session ID
        user_id:
          type: string
          description: User ID
        status:
          type: string
          enum: [active, expired, terminated]
          description: Session status
        request_count:
          type: integer
          description: Number of requests
        last_activity:
          type: string
          format: date-time
          description: Last activity timestamp
        expires_at:
          type: string
          format: date-time
          description: Expiration timestamp
        context:
          type: object
          description: Session context
        created_at:
          type: string
          format: date-time
          description: Creation timestamp

    ProviderInfo:
      type: object
      properties:
        id:
          type: string
          description: Provider ID
        name:
          type: string
          description: Provider name
        type:
          type: string
          enum: [deepseek, claude, gemini, qwen, zai]
          description: Provider type
        model:
          type: string
          description: Default model
        weight:
          type: number
          description: Provider weight
        enabled:
          type: boolean
          description: Whether provider is enabled
        health_status:
          type: string
          enum: [healthy, degraded, unhealthy, unknown]
          description: Provider health status
        response_time_ms:
          type: integer
          description: Average response time
        success_rate:
          type: number
          description: Success rate (0-1)
        capabilities:
          $ref: '#/components/schemas/ProviderCapabilities'
        last_updated:
          type: string
          format: date-time
          description: Last update timestamp

    ProviderCapabilities:
      type: object
      properties:
        supported_models:
          type: array
          items:
            type: string
          description: Supported models
        supported_features:
          type: array
          items:
            type: string
            enum: [streaming, function_calling, vision]
          description: Supported features
        limits:
          $ref: '#/components/schemas/ModelLimits'
        supported_request_types:
          type: array
          items:
            type: string
            enum: [code_generation, reasoning, tool_use]
          description: Supported request types
        supports_streaming:
          type: boolean
          description: Streaming support
        supports_function_calling:
          type: boolean
          description: Function calling support
        supports_vision:
          type: boolean
          description: Vision capabilities
        metadata:
          type: object
          description: Additional capabilities metadata

    ModelLimits:
      type: object
      properties:
        max_tokens:
          type: integer
          minimum: 1
          description: Maximum tokens
        max_input_length:
          type: integer
          minimum: 1
          description: Maximum input length
        max_output_length:
          type: integer
          minimum: 1
          description: Maximum output length
        max_concurrent_requests:
          type: integer
          minimum: 1
          description: Maximum concurrent requests

    HealthResponse:
      type: object
      properties:
        status:
          type: string
          enum: [healthy, degraded, unhealthy]
          description: Overall system status
        components:
          type: array
          items:
            $ref: '#/components/schemas/ComponentHealth'
          description: Component health details
        timestamp:
          type: string
          format: date-time
          description: Health check timestamp
        version:
          type: string
          description: System version

    ComponentHealth:
      type: object
      properties:
        name:
          type: string
          description: Component name
        status:
          type: string
          enum: [healthy, degraded, unhealthy]
          description: Component status
        message:
          type: string
          description: Status message
        response_time_ms:
          type: integer
          description: Response time in milliseconds
        details:
          type: object
          description: Additional details

    MetricsResponse:
      type: object
      properties:
        metrics:
          type: object
          description: System metrics
        start_time:
          type: string
          format: date-time
          description: Metrics start time
        end_time:
          type: string
          format: date-time
          description: Metrics end time

    Error:
      type: object
      properties:
        error:
          type: string
          description: Error message
        code:
          type: string
          description: Error code
        details:
          type: object
          description: Additional error details

security:
  - BearerAuth:
      type: apiKey
      description: JWT or API key authentication
      bearerFormat: JWT
      
servers:
  - url: http://localhost:8080/v1
    description: Development server

tags:
  - name: HelixAgent API
    description: Main API endpoints
```