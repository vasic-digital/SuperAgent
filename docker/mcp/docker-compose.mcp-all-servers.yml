version: '3.8'

# =============================================================================
# COMPREHENSIVE MCP SERVERS DOCKER COMPOSE
# All 36+ MCP servers from git submodules
# Port ranges: 9101-9199 (Core), 9201-9299 (Database), 9301-9399 (Vector),
#              9401-9499 (DevOps), 9501-9599 (Browser), 9601-9699 (Comm),
#              9701-9799 (Productivity), 9801-9899 (Search), 9901-9999 (Cloud)
# =============================================================================

services:
  # ===========================================================================
  # TIER 1: CORE MCP SERVERS (from MCP-Servers monorepo) - Ports 9101-9107
  # ===========================================================================

  mcp-fetch:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-server
      args:
        SERVER_NAME: fetch
        SOURCE_DIR: MCP-Servers
    container_name: helixagent-mcp-fetch
    ports:
      - "9101:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-git:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-server
      args:
        SERVER_NAME: git
        SOURCE_DIR: MCP-Servers
    container_name: helixagent-mcp-git
    ports:
      - "9102:9000"
    volumes:
      - ${HOME}:/home/user:ro
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-time:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-server
      args:
        SERVER_NAME: time
        SOURCE_DIR: MCP-Servers
    container_name: helixagent-mcp-time
    ports:
      - "9103:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-filesystem:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-server
      args:
        SERVER_NAME: filesystem
        SOURCE_DIR: MCP-Servers
    container_name: helixagent-mcp-filesystem
    ports:
      - "9104:9000"
    volumes:
      - ${HOME}:/home/user
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-memory:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-server
      args:
        SERVER_NAME: memory
        SOURCE_DIR: MCP-Servers
    container_name: helixagent-mcp-memory
    ports:
      - "9105:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-everything:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-server
      args:
        SERVER_NAME: everything
        SOURCE_DIR: MCP-Servers
    container_name: helixagent-mcp-everything
    ports:
      - "9106:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-sequentialthinking:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-server
      args:
        SERVER_NAME: sequentialthinking
        SOURCE_DIR: MCP-Servers
    container_name: helixagent-mcp-sequentialthinking
    ports:
      - "9107:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 2: ENTERPRISE MCP SERVERS - Ports 9201-9299
  # ===========================================================================

  mcp-mongodb:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/mongodb-mcp
    container_name: helixagent-mcp-mongodb
    ports:
      - "9201:9000"
    environment:
      - MONGODB_URI=${MONGODB_URI:-mongodb://localhost:27017}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-redis:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-python
      args:
        SOURCE_DIR: MCP/submodules/redis-mcp
    container_name: helixagent-mcp-redis
    ports:
      - "9202:9000"
    environment:
      - REDIS_URL=${REDIS_URL:-redis://localhost:6379}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-github:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/github-mcp-server
    container_name: helixagent-mcp-github
    ports:
      - "9203:9000"
    environment:
      - GITHUB_PERSONAL_ACCESS_TOKEN=${GITHUB_TOKEN}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-slack:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/slack-mcp
    container_name: helixagent-mcp-slack
    ports:
      - "9204:9000"
    environment:
      - SLACK_BOT_TOKEN=${SLACK_BOT_TOKEN}
      - SLACK_TEAM_ID=${SLACK_TEAM_ID}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-notion:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/notion-mcp-server
    container_name: helixagent-mcp-notion
    ports:
      - "9205:9000"
    environment:
      - NOTION_API_KEY=${NOTION_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-trello:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/trello-mcp
    container_name: helixagent-mcp-trello
    ports:
      - "9206:9000"
    environment:
      - TRELLO_API_KEY=${TRELLO_API_KEY}
      - TRELLO_TOKEN=${TRELLO_TOKEN}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-kubernetes:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/kubernetes-mcp
    container_name: helixagent-mcp-kubernetes
    ports:
      - "9207:9000"
    volumes:
      - ${HOME}/.kube:/root/.kube:ro
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 3: DATA & VECTOR MCP SERVERS - Ports 9301-9399
  # ===========================================================================

  mcp-qdrant:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-python
      args:
        SOURCE_DIR: MCP/submodules/qdrant-mcp
    container_name: helixagent-mcp-qdrant
    ports:
      - "9301:9000"
    environment:
      - QDRANT_URL=${QDRANT_URL:-http://localhost:6333}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-supabase:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/supabase-mcp
    container_name: helixagent-mcp-supabase
    ports:
      - "9302:9000"
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_KEY=${SUPABASE_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-atlassian:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-python
      args:
        SOURCE_DIR: MCP/submodules/atlassian-mcp
    container_name: helixagent-mcp-atlassian
    ports:
      - "9303:9000"
    environment:
      - ATLASSIAN_URL=${ATLASSIAN_URL}
      - ATLASSIAN_EMAIL=${ATLASSIAN_EMAIL}
      - ATLASSIAN_API_TOKEN=${ATLASSIAN_API_TOKEN}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 4: BROWSER & SEARCH MCP SERVERS - Ports 9401-9499
  # ===========================================================================

  mcp-browserbase:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/browserbase-mcp
    container_name: helixagent-mcp-browserbase
    ports:
      - "9401:9000"
    environment:
      - BROWSERBASE_API_KEY=${BROWSERBASE_API_KEY}
      - BROWSERBASE_PROJECT_ID=${BROWSERBASE_PROJECT_ID}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-firecrawl:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/firecrawl-mcp
    container_name: helixagent-mcp-firecrawl
    ports:
      - "9402:9000"
    environment:
      - FIRECRAWL_API_KEY=${FIRECRAWL_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-brave-search:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/brave-search
    container_name: helixagent-mcp-brave-search
    ports:
      - "9403:9000"
    environment:
      - BRAVE_API_KEY=${BRAVE_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-playwright:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-playwright
      args:
        SOURCE_DIR: MCP/submodules/playwright-mcp
    container_name: helixagent-mcp-playwright
    ports:
      - "9404:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 4: COMMUNICATION MCP SERVERS - Ports 9501-9599
  # ===========================================================================

  mcp-telegram:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-python
      args:
        SOURCE_DIR: MCP/submodules/telegram-mcp
    container_name: helixagent-mcp-telegram
    ports:
      - "9501:9000"
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 4: PRODUCTIVITY MCP SERVERS - Ports 9601-9699
  # ===========================================================================

  mcp-airtable:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/airtable-mcp
    container_name: helixagent-mcp-airtable
    ports:
      - "9601:9000"
    environment:
      - AIRTABLE_API_KEY=${AIRTABLE_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-obsidian:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/obsidian-mcp
    container_name: helixagent-mcp-obsidian
    ports:
      - "9602:9000"
    volumes:
      - ${HOME}/Obsidian:/vault:ro
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 4: CLOUD PROVIDER MCP SERVERS - Ports 9701-9799
  # ===========================================================================

  mcp-heroku:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/heroku-mcp
    container_name: helixagent-mcp-heroku
    ports:
      - "9701:9000"
    environment:
      - HEROKU_API_KEY=${HEROKU_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-cloudflare:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/cloudflare-mcp
    container_name: helixagent-mcp-cloudflare
    ports:
      - "9702:9000"
    environment:
      - CLOUDFLARE_API_TOKEN=${CLOUDFLARE_API_TOKEN}
      - CLOUDFLARE_ACCOUNT_ID=${CLOUDFLARE_ACCOUNT_ID}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-workers:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/workers-mcp
    container_name: helixagent-mcp-workers
    ports:
      - "9703:9000"
    environment:
      - CLOUDFLARE_API_TOKEN=${CLOUDFLARE_API_TOKEN}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 4: AI/SEARCH MCP SERVERS - Ports 9801-9899
  # ===========================================================================

  mcp-perplexity:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/perplexity-mcp
    container_name: helixagent-mcp-perplexity
    ports:
      - "9801:9000"
    environment:
      - PERPLEXITY_API_KEY=${PERPLEXITY_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-omnisearch:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/omnisearch-mcp
    container_name: helixagent-mcp-omnisearch
    ports:
      - "9802:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-context7:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/context7-mcp
    container_name: helixagent-mcp-context7
    ports:
      - "9803:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-llamaindex:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/llamaindex-mcp
    container_name: helixagent-mcp-llamaindex
    ports:
      - "9804:9000"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-langchain:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/langchain-mcp
    container_name: helixagent-mcp-langchain
    ports:
      - "9805:9000"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  # ===========================================================================
  # TIER 4: DEVOPS MCP SERVERS - Ports 9901-9999
  # ===========================================================================

  mcp-sentry:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/sentry-mcp
    container_name: helixagent-mcp-sentry
    ports:
      - "9901:9000"
    environment:
      - SENTRY_AUTH_TOKEN=${SENTRY_AUTH_TOKEN}
      - SENTRY_ORG=${SENTRY_ORG}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

  mcp-microsoft:
    build:
      context: ../..
      dockerfile: docker/mcp/Dockerfile.mcp-submodule
      args:
        SOURCE_DIR: MCP/submodules/microsoft-mcp
    container_name: helixagent-mcp-microsoft
    ports:
      - "9902:9000"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "nc", "-z", "localhost", "9000"]
      interval: 10s
      timeout: 5s
      retries: 3

networks:
  default:
    name: helixagent-mcp-network

# Total: 32 MCP servers across 8 categories
