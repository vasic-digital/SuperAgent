# RabbitMQ Configuration for HelixAgent
# https://www.rabbitmq.com/configure.html

# Load definitions on startup
load_definitions = /etc/rabbitmq/definitions.json

# Networking
listeners.tcp.default = 5672
management.tcp.port = 15672

# Memory management
vm_memory_high_watermark.relative = 0.7
vm_memory_high_watermark_paging_ratio = 0.75

# Disk space
disk_free_limit.relative = 1.0

# Connections
channel_max = 2047
heartbeat = 60
tcp_listen_options.backlog = 128
tcp_listen_options.nodelay = true
tcp_listen_options.linger.on = true
tcp_listen_options.linger.timeout = 0

# Message size
max_message_size = 536870912

# Queue settings
queue_index_embed_msgs_below = 4096

# Consumer prefetch
consumer_timeout = 1800000

# Logging
log.console = true
log.console.level = info
log.file.level = info

# Management UI
management.load_definitions = /etc/rabbitmq/definitions.json
management.cors.allow_origins.1 = http://localhost:3000
management.cors.allow_origins.2 = http://localhost:7061

# Prometheus metrics
prometheus.return_per_object_metrics = true
